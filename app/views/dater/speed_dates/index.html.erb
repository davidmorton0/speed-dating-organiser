<% provide(:title, @event.title) %>
<%= render 'dater/events/events_links' %>

<h1><%= @event.title %></h1>
<%= render 'dater/events/event_links' %>
<h2>Schedule</h2>

<div class="row">
  <aside class="col-md-4">
    <section>
      <% if @speed_dates.any? %>
        <table class="table">
          <tr>
            <th>Round</th>
            <% @female_daters.each do |female_dater| %>
              <th> <%= female_dater.name %> </th>
            <% end %>
            <th> Break </th>
          </tr>

          <% (1..@rounds).to_a.each do |round| %>
            <tr>
              <td><%= round.to_s %></td>
              <% @female_daters.each do |female_dater| %>
              <% sd = @speed_dates.select { |speed_date| speed_date.round == round && speed_date.dater1_id == female_dater.id }.first %>
                <% if sd.dater2_id %>
                  <td> <%= @dater_names[sd.dater2_id] %> </td>
                <% else %>
                <td> Break </td>
                <% end %>
              <% end %>
              <td><%= @speed_dates.select { |speed_date| speed_date.round == round && speed_date.dater1_id.nil? }.map { |speed_date| @dater_names[speed_date.dater2_id] }.join(', ') %></td>
            </tr>
          <% end %>
        </table>
      <% else %>
        <h3>Please wait.  Schedule has not been created yet.</h3>
      <% end %>
    </section>
  </aside>
</div>
